<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Repositorio de Actividades</title>
<style>
  :root{
    --bg:#0b0b0b; --card:#151515; --olive:#6B8E23; --olive-2:#5f7f1f;
    --text:#e9f0e6; --ring:#88a85a50; --shadow:0 10px 24px rgba(0,0,0,.45), 0 2px 8px rgba(0,0,0,.35);
    --radius:18px;
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{
    margin:0; background:radial-gradient(1200px 600px at 20% -10%, #101410 0%, #0b0b0b 40%, #060606 100%);
    color:var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial;
  }
  .wrap{max-width:1100px;margin:0 auto;padding:28px 20px 60px}
  header{display:flex;align-items:center;gap:12px;margin-bottom:18px}
  .title{font-size:clamp(22px,3vw,34px);font-weight:800;letter-spacing:.3px;display:flex;align-items:center;gap:10px}
  .dot{width:10px;height:10px;border-radius:999px;background:var(--olive);box-shadow:0 0 0 6px var(--ring)}
  .grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fill,minmax(230px,1fr))}
  .card{
    background:linear-gradient(180deg, #151915 0%, #121612 100%);
    border:1px solid #1f261a;border-radius:var(--radius);padding:16px;
    box-shadow:var(--shadow);transition:transform .12s, border-color .2s, box-shadow .2s;
  }
  .card:hover{transform:translateY(-2px);border-color:#2d3823;box-shadow:0 16px 28px rgba(0,0,0,.55)}
  .card a{display:flex;flex-direction:column;gap:12px;text-decoration:none;color:inherit}
  .badge{
    display:inline-flex;align-items:center;gap:8px;align-self:flex-start;
    background:var(--olive);color:#0b0f08;font-weight:700;padding:8px 12px;border-radius:12px;
    box-shadow:inset 0 -1px 0 rgba(0,0,0,.2), 0 8px 20px rgba(107,142,35,.25);
    transition:background .2s;
  }
  .card:hover .badge{background:var(--olive-2)}
  .name{font-weight:800;font-size:1.05rem;line-height:1.25}
  .status{margin-top:8px;opacity:.75}
  .empty,.error{background:#131313;border:1px dashed #2a2a2a;color:#b9c3b2;padding:22px;border-radius:16px;margin-top:16px}
</style>
</head>
<body>
  <div class="wrap">
    <header><span class="dot" aria-hidden="true"></span><div class="title">Repositorio de Actividades</div></header>

    <div id="status" class="status">Cargando…</div>
    <div id="grid" class="grid" hidden></div>
  </div>

<script>
(() => {
  const CONFIG = {
    owner: "Emm1186",
    repo:  "2430117-AW",
    branch:"main",
    baseHref: ".",                 // dónde abrirá las carpetas localmente
    exclude: [".git",".github","node_modules","vendor",".vscode",".idea"]
  };

  const $grid = document.getElementById("grid");
  const $status = document.getElementById("status");

  const pretty = s => s.replace(/[_-]+/g," ").replace(/\s+/g," ").replace(/\bjs\b/gi,"JS")
                       .replace(/\bpractica\b/gi,"Práctica").trim();

  async function fetchDirs(){
    const api = `https://api.github.com/repos/${CONFIG.owner}/${CONFIG.repo}/contents?ref=${encodeURIComponent(CONFIG.branch)}`;
    const res = await fetch(api,{headers:{Accept:"application/vnd.github+json"}});
    if(!res.ok) throw new Error(`GitHub API ${res.status}`);
    return (await res.json()).filter(x=>x.type==="dir" && !CONFIG.exclude.includes(x.name));
  }

  function render(items){
    if(!items.length){ $status.outerHTML = `<div class="empty">No hay prácticas.</div>`; return; }
    items.sort((a,b)=> a.name.localeCompare(b.name, "es", {numeric:true,sensitivity:"base"}));
    const frag = document.createDocumentFragment();
    for(const it of items){
      const card = document.createElement("article"); card.className = "card";
      const a = document.createElement("a"); a.href = `${CONFIG.baseHref}/${encodeURIComponent(it.name)}/`;
      a.title = `Abrir ${it.name}`;

      const badge = document.createElement("span"); badge.className="badge";
      badge.innerHTML = `<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M10.5 4.5l2 2H20a2 2 0 0 1 2 2V18a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6.5A2 2 0 0 1 4 4.5h4.5z"/></svg> Abrir`;

      const name = document.createElement("div"); name.className="name"; name.textContent = pretty(it.name);

      a.appendChild(badge); a.appendChild(name); card.appendChild(a); frag.appendChild(card);
    }
    $grid.appendChild(frag); $grid.hidden = false; $status.remove();
  }

  fetchDirs().then(render).catch(err=>{
    console.error(err);
    $status.outerHTML = `<div class="error">No se pudo listar el repo. Revisa configuración.</div>`;
  });
})();
</script>
</body>
</html>
