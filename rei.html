<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Repositorio de Actividades</title>
<style>
  :root{
    --bg:#0b0b0b;          /* fondo negro */
    --card:#151515;        /* tarjetas */
    --olive:#6B8E23;       /* verde oliva */
    --olive-2:#5f7f1f;     /* hover/active */
    --text:#e9f0e6;        /* texto */
    --muted:#aab5a7;
    --ring:#88a85a50;
    --shadow: 0 10px 24px rgba(0,0,0,.45), 0 2px 8px rgba(0,0,0,.35);
    --radius:18px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;background:radial-gradient(1200px 600px at 20% -10%, #101410 0%, #0b0b0b 40%, #060606 100%);
    color:var(--text);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji","Segoe UI Emoji";
  }
  .wrap{max-width:1100px;margin:0 auto;padding:28px 20px 60px}
  header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:22px}
  .title{font-size:clamp(22px,3vw,34px);font-weight:800;letter-spacing:.3px;display:flex;align-items:center;gap:10px}
  .title .dot{width:10px;height:10px;border-radius:999px;background:var(--olive);box-shadow:0 0 0 6px var(--ring)}
  .hint{color:var(--muted);font-size:.95rem}
  .search{width:100%;max-width:420px;position:relative}
  .search input{
    width:100%;background:#111;border:1px solid #222;color:var(--text);
    padding:12px 14px 12px 40px;border-radius:14px;outline:none;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.02), 0 0 0 0 var(--ring);
    transition: box-shadow .2s, border-color .2s;
  }
  .search input:focus{border-color:var(--olive);box-shadow:0 0 0 6px var(--ring)}
  .search svg{position:absolute;left:12px;top:50%;transform:translateY(-50%);opacity:.7}
  .grid{display:grid;gap:16px;grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));}
  .card{
    background:linear-gradient(180deg, #151915 0%, #121612 100%);
    border:1px solid #1f261a;border-radius:var(--radius);
    padding:16px;box-shadow:var(--shadow);position:relative;overflow:hidden;
    transition: transform .12s ease, border-color .2s ease, box-shadow .2s ease;
  }
  .card:hover{transform:translateY(-2px);border-color:#2d3823;box-shadow:0 16px 28px rgba(0,0,0,.55)}
  .card a{display:flex;flex-direction:column;gap:12px;text-decoration:none;color:inherit}
  .badge{
    display:inline-flex;align-items:center;gap:8px;align-self:flex-start;
    background:var(--olive);color:#0b0f08;font-weight:700;padding:8px 12px;border-radius:12px;
    box-shadow: inset 0 -1px 0 rgba(0,0,0,.2), 0 8px 20px rgba(107,142,35,.25);
    transition: background .2s ease;
  }
  .card:hover .badge{background:var(--olive-2)}
  .name{font-weight:800;font-size:1.05rem;line-height:1.25}
  .meta{color:var(--muted);font-size:.85rem}
  .status{margin-top:14px;color:var(--muted);font-size:.95rem}
  .empty,.error{
    background:#131313;border:1px dashed #2a2a2a;color:var(--muted);
    padding:22px;border-radius:16px;margin-top:16px
  }
  .footer{margin-top:26px;display:flex;justify-content:space-between;align-items:center;gap:12px;color:var(--muted);font-size:.9rem;border-top:1px solid #1b1f17;padding-top:14px}
  .pill{border:1px solid #2a3321;background:#10130f;color:var(--muted);padding:6px 10px;border-radius:999px;font-size:.82rem}
  .sr{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <div class="title"><span class="dot" aria-hidden="true"></span> Repositorio de Actividades</div>
        <div class="hint">Se lista automáticamente desde GitHub y abre la carpeta local.</div>
      </div>
      <label class="search">
        <span class="sr">Buscar práctica</span>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
        <input id="q" type="search" placeholder="Buscar práctica... (p.ej. 'practica 3', 'examen')" autocomplete="off">
      </label>
    </header>

    <div id="status" class="status">Cargando prácticas…</div>
    <div id="grid" class="grid" hidden></div>

    <div class="footer">
      <span class="pill">Botones verde oliva • fondo negro</span>
      <span>© <span id="year"></span> Emm</span>
    </div>
  </div>

<script>
(() => {
  const CONFIG = {
    owner: "Emm1186",
    repo: "2430117-AW",
    branch: "main",
    // ruta base donde viven las carpetas en TU servidor (normalmente ".")
    baseHref: ".", 
    // carpetas a excluir
    exclude: [".git", ".github", "node_modules", "vendor", ".vscode", ".idea"]
  };

  const $grid = document.getElementById("grid");
  const $status = document.getElementById("status");
  const $q = document.getElementById("q");
  document.getElementById("year").textContent = new Date().getFullYear();

  const pretty = s => {
    return s.replace(/[_-]+/g, " ")
            .replace(/\s+/g, " ")
            .replace(/\b(no|num|num\.|numero)\b/gi, m => m.toLowerCase())
            .replace(/\bjs\b/gi, "JS")
            .replace(/\baw\b/gi, "AW")
            .replace(/\bpractica\b/gi, "Práctica")
            .replace(/\bexamen\b/gi, "Examen")
            .trim();
  };

  async function fetchDirs(){
    const api = `https://api.github.com/repos/${CONFIG.owner}/${CONFIG.repo}/contents?ref=${encodeURIComponent(CONFIG.branch)}`;
    const res = await fetch(api, {headers: {Accept: "application/vnd.github+json"}});
    if (!res.ok) throw new Error(`GitHub API ${res.status}`);
    const data = await res.json();
    return data.filter(x => x.type === "dir" && !CONFIG.exclude.includes(x.name));
  }

  function render(items){
    $grid.innerHTML = "";
    if (!items.length){
      $status.outerHTML = `<div class="empty">No se encontraron carpetas en el repo.</div>`;
      return;
    }
    const frag = document.createDocumentFragment();
    items.sort((a,b)=> a.name.localeCompare(b.name, "es", {numeric:true,sensitivity:"base"}));
    for (const it of items){
      const card = document.createElement("article");
      card.className = "card";
      card.setAttribute("data-name", it.name.toLowerCase());

      const a = document.createElement("a");
      // Abrirá la carpeta local con el mismo nombre que en GitHub:
      a.href = `${CONFIG.baseHref}/${encodeURIComponent(it.name)}/`;
      a.title = `Abrir ${it.name}`;

      const badge = document.createElement("span");
      badge.className = "badge";
      badge.innerHTML = `<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M10.5 4.5l2 2H20a2 2 0 0 1 2 2V18a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6.5A2 2 0 0 1 4 4.5h4.5z"/></svg> Abrir`;

      const name = document.createElement("div");
      name.className = "name";
      name.textContent = pretty(it.name);

      const meta = document.createElement("div");
      meta.className = "meta";
      meta.textContent = `Carpeta: ${it.name}`;

      a.appendChild(badge);
      a.appendChild(name);
      a.appendChild(meta);
      card.appendChild(a);
      frag.appendChild(card);
    }
    $grid.appendChild(frag);
    $grid.hidden = false;
    $status.remove();
  }

  // Filtro en vivo
  $q.addEventListener("input", () => {
    const term = $q.value.trim().toLowerCase();
    const cards = $grid.querySelectorAll(".card");
    let count = 0;
    cards.forEach(c => {
      const ok = !term || (c.getAttribute("data-name") || "").includes(term);
      c.style.display = ok ? "" : "none";
      if (ok) count++;
    });
  });

  // Init
  fetchDirs()
    .then(render)
    .catch(err => {
      console.error(err);
      $status.outerHTML = `<div class="error">No se pudo leer el repo en GitHub. Verifica <code>${CONFIG.owner}/${CONFIG.repo}</code> y la rama <code>${CONFIG.branch}</code>.</div>`;
      $grid.hidden = true;
    });
})();
</script>
</body>
</html>